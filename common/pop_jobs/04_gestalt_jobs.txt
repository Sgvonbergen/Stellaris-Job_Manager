###################
# Gestalt Jobs
###################
spawning_drone = {
	category = complex_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_spawning_pool

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible = {
		drone_job_check_trigger = yes
        SdjTriggerCheck_job_cat_complex_drone = yes
        NOT = { SdjTriggerJobPriorityN_job_spawning_drone = yes }
	}

	planet_modifier = {
		planet_amenities_no_happiness_add = 5
		planet_pop_assembly_organic_add = 2
	}
	triggered_planet_modifier = {
		potential = {
			has_trait = trait_charismatic
		}
		modifier = {
			planet_amenities_no_happiness_add = 1
		}
	}
	triggered_planet_modifier = {
		potential = {
			has_trait = trait_repugnant
		}
		modifier = {
			planet_amenities_no_happiness_add = -1
		}
	}

	resources = {
		category = planet_jobs
		upkeep = {
			trigger = {
				is_lithoid = no
			}
			food = 5
		}
		upkeep = {
			trigger = {
				is_lithoid = yes
			}
			minerals = 5
		}
	}

	weight = {
        weight = 1
		modifier = {
            factor = @SdjConstWeightModifier0To9
            SdjTriggerJobPriority0_job_spawning_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier0To1
            SdjTriggerJobPriority1_job_spawning_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier1To2
            SdjTriggerJobPriority2_job_spawning_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier2To3
            SdjTriggerJobPriority3_job_spawning_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier3To4
            SdjTriggerJobPriority4_job_spawning_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier4To5
            SdjTriggerJobPriority5_job_spawning_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier5To6
            SdjTriggerJobPriority6_job_spawning_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier6To7
            SdjTriggerJobPriority7_job_spawning_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier7To8
            SdjTriggerJobPriority8_job_spawning_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier8To9
            SdjTriggerJobPriority9_job_spawning_drone = yes
        }
        modifier = {
			factor = 1.25
			has_trait = trait_charismatic
		}
		modifier = {
			factor = 0.9
			has_trait = trait_repugnant
		}
		modifier = {
			factor = 0.5 # job is less useful if pop control is active, but still gives amenities
			planet = {
				has_modifier = planet_population_control_gestalt
			}
		}
		modifier = {
			factor = 0.01 # crisis purge
			exists = planet
			exists = planet.controller
			planet.controller = {
				OR = {
					is_country_type = swarm
					is_country_type = ai_empire
				}
			}
		}
	}
}

replicator = {
	category = complex_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_robot_assembly_plant

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible = {
		drone_job_check_trigger = yes
        SdjTriggerCheck_job_cat_complex_drone = yes
        NOT = { SdjTriggerJobPriorityN_job_replicator = yes }
	}

	planet_modifier = {
		planet_pop_assembly_add = 1
	}

	resources = {
		category = planet_pop_assemblers
		upkeep = {
			alloys = 1
		}
	}

	weight = {
        weight = 1
        modifier = {
            factor = @SdjConstWeightModifier0To9
            SdjTriggerJobPriority0_job_replicator = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier0To1
            SdjTriggerJobPriority1_job_replicator = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier1To2
            SdjTriggerJobPriority2_job_replicator = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier2To3
            SdjTriggerJobPriority3_job_replicator = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier3To4
            SdjTriggerJobPriority4_job_replicator = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier4To5
            SdjTriggerJobPriority5_job_replicator = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier5To6
            SdjTriggerJobPriority6_job_replicator = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier6To7
            SdjTriggerJobPriority7_job_replicator = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier7To8
            SdjTriggerJobPriority8_job_replicator = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier8To9
            SdjTriggerJobPriority9_job_replicator = yes
        }
		modifier = {
			factor = 0.01 # crisis purge
			exists = planet
			exists = planet.controller
			planet.controller = {
				OR = {
					is_country_type = swarm
					is_country_type = ai_empire
				}
			}
		}
	}
}

coordinator = {
	category = complex_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_machine_capital

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible = {
		drone_job_check_trigger = yes
        SdjTriggerCheck_job_cat_complex_drone = yes
        NOT = { SdjTriggerJobPriorityN_job_coordinator = yes }
	}

	resources = {
		category = planet_bureaucrats
		upkeep = {
			energy = 6
		}
	}

	triggered_planet_modifier = {
		potential = {
			planet = { has_modifier = planet_artifact_relays_machine }
		}
		modifier = {
			planet_stability_add = 2
			planet_jobs_simple_drone_produces_mult = 0.01
		}
	}

	triggered_country_modifier = {
		potential = {
			exists = owner
			owner = {
				has_swapped_tradition = tr_synchronicity_integrated_preservation
			}
		}
		modifier = {
			country_admin_cap_add = 3
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_swapped_tradition = tr_synchronicity_integrated_preservation
			}
		}
		modifier = {
			planet_crime_no_happiness_add = -2
		}
	}

	country_modifier = {
		country_admin_cap_add = 15
	}

	triggered_country_modifier = {
		potential = {
			exists = planet
			planet = {
				exists = sector
				sector = {
					exists = leader
					leader = { has_trait = leader_trait_amplifier }
				}
			}
		}
		modifier = {
			country_admin_cap_add = 1
		}
	}

	weight = {
        weight = 1
		modifier = {
            factor = @SdjConstWeightModifier0To8
            SdjTriggerJobPriority0_job_coordinator = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier0To1
            SdjTriggerJobPriority1_job_coordinator = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier1To2
            SdjTriggerJobPriority2_job_coordinator = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier2To3
            SdjTriggerJobPriority3_job_coordinator = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier3To4
            SdjTriggerJobPriority4_job_coordinator = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier4To5
            SdjTriggerJobPriority5_job_coordinator = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier5To6
            SdjTriggerJobPriority6_job_coordinator = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier6To7
            SdjTriggerJobPriority7_job_coordinator = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier7To8
            SdjTriggerJobPriority8_job_coordinator = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier8To9
            SdjTriggerJobPriority9_job_coordinator = yes
        }
		modifier = {
			factor = 0.9
			exists = owner
			years_passed < 1
			owner = { has_valid_civic = civic_machine_assimilator }
			has_trait = trait_cybernetic
		}
	}
}

evaluator = {
	category = complex_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_machine_capital

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible = {
		drone_job_check_trigger = yes
        SdjTriggerCheck_job_cat_complex_drone = yes
        NOT = { SdjTriggerJobPriorityN_job_evaluator = yes }
	}

	resources = {
		category = planet_evaluators
		produces = {
			unity = 4
		}
		upkeep = {
			energy = 1
		}
	}

	weight = {
		weight = 1
		modifier = {
            factor = @SdjConstWeightModifier0To8
            SdjTriggerJobPriority0_job_evaluator = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier0To1
            SdjTriggerJobPriority1_job_evaluator = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier1To2
            SdjTriggerJobPriority2_job_evaluator = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier2To3
            SdjTriggerJobPriority3_job_evaluator = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier3To4
            SdjTriggerJobPriority4_job_evaluator = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier4To5
            SdjTriggerJobPriority5_job_evaluator = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier5To6
            SdjTriggerJobPriority6_job_evaluator = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier6To7
            SdjTriggerJobPriority7_job_evaluator = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier7To8
            SdjTriggerJobPriority8_job_evaluator = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier8To9
            SdjTriggerJobPriority9_job_evaluator = yes
        }   		 
		modifier = {
			factor = 0.9
			exists = owner
			years_passed < 1
			owner = { has_valid_civic = civic_machine_assimilator }
			has_trait = trait_cybernetic
		}
		modifier = {
			factor = 1.25
			OR = {
				has_trait = trait_traditional
				has_trait = trait_robot_propaganda_machines
			}
		}
	}
}

synapse_drone = {
	category = complex_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_hive_capital

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible = {
		drone_job_check_trigger = yes
        SdjTriggerCheck_job_cat_complex_drone = yes
        NOT = { SdjTriggerJobPriorityN_job_synapse_drone = yes }
	}

	resources = {
		category = planet_synapse_drones
		produces = {
			unity = 3
		}
		upkeep = {
			trigger = {
				is_lithoid = no
			}
			food = 2
			energy = 2
		}
		upkeep = {
			trigger = {
				is_lithoid = yes
			}
			minerals = 2
			energy = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			planet = { has_modifier = planet_artifact_relays_hivemind }
		}
		modifier = {
			planet_stability_add = 2
			planet_jobs_simple_drone_produces_mult = 0.01
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_swapped_tradition = tr_synchronicity_instinctive_synchronization }
		}
		modifier = {
			planet_amenities_no_happiness_add = 2
		}
	}

	country_modifier = {
		country_admin_cap_add = 5
	}

	triggered_country_modifier = {
		potential = {
			exists = planet
			planet = {
				exists = sector
				sector = {
					exists = leader
					leader = { has_trait = leader_trait_mindfulness }
				}
			}
		}
		modifier = {
			country_admin_cap_add = 1
		}
	}

	weight = {
        weight = 1
		modifier = {
            factor = @SdjConstWeightModifier0To8
            SdjTriggerJobPriority0_job_synapse_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier0To1
            SdjTriggerJobPriority1_job_synapse_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier1To2
            SdjTriggerJobPriority2_job_synapse_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier2To3
            SdjTriggerJobPriority3_job_synapse_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier3To4
            SdjTriggerJobPriority4_job_synapse_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier4To5
            SdjTriggerJobPriority5_job_synapse_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier5To6
            SdjTriggerJobPriority6_job_synapse_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier6To7
            SdjTriggerJobPriority7_job_synapse_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier7To8
            SdjTriggerJobPriority8_job_synapse_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier8To9
            SdjTriggerJobPriority9_job_synapse_drone = yes
        }
        modifier = {
			factor = 1.25
			OR = {
				has_trait = trait_traditional
				has_trait = trait_robot_propaganda_machines
			}
		}
	}
}

brain_drone = {
	category = complex_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_research_lab_1

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible = {
		drone_job_check_trigger = yes
        SdjTriggerCheck_job_cat_complex_drone = yes
        NOT = { SdjTriggerJobPriorityN_job_brain_drone = yes }
	}

	resources = {
		category = planet_researchers
		produces = {
			physics_research = 4
			engineering_research = 4
			society_research = 4
		}
		upkeep = {
			minerals = 6
		}
		upkeep = {
			trigger = {
				exists = owner
				owner = {
					has_edict = research_subsidies
				}
			}
			energy = 1
		}
	}

	weight = {
        weight = 1
		modifier = {
            factor = @SdjConstWeightModifier0To4
            SdjTriggerJobPriority0_job_brain_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier0To1
            SdjTriggerJobPriority1_job_brain_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier1To2
            SdjTriggerJobPriority2_job_brain_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier2To3
            SdjTriggerJobPriority3_job_brain_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier3To4
            SdjTriggerJobPriority4_job_brain_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier4To5
            SdjTriggerJobPriority5_job_brain_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier5To6
            SdjTriggerJobPriority6_job_brain_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier6To7
            SdjTriggerJobPriority7_job_brain_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier7To8
            SdjTriggerJobPriority8_job_brain_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier8To9
            SdjTriggerJobPriority9_job_brain_drone = yes
        }
        modifier = {
			factor = 3
			has_trait = trait_erudite
		}
		modifier = {
			factor = 2
			has_trait = trait_intelligent
		}
		modifier = {
			factor = 1.5
			OR = {
				has_trait = trait_natural_engineers
				has_trait = trait_natural_physicists
				has_trait = trait_natural_sociologists
			}
		}
		modifier = {
			factor = 0.65
			OR = {
				has_trait = trait_syncretic_proles
				has_trait = trait_presapient_proles
			}
		}
		modifier = {
			factor = 0.9
			exists = owner
			years_passed < 1
			owner = { has_valid_civic = civic_machine_assimilator }
			has_trait = trait_cybernetic
		}
		modifier = {
			factor = 0
			planet = {
				owner = {
					is_ai = yes
					has_resource = { type = minerals amount < 500 }
					has_monthly_income = {
						resource = minerals
						value < 25
					}
				}
			}
		}
	}
}

calculator = {
	category = complex_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_research_lab_1

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible = {
		drone_job_check_trigger = yes
        SdjTriggerCheck_job_cat_complex_drone = yes
        NOT = { SdjTriggerJobPriorityN_job_calculator = yes }
	}

	resources = {
		category = planet_researchers
		produces = {
			physics_research = 4
			engineering_research = 4
			society_research = 4
		}
		upkeep = {
			energy = 4
		}
		upkeep = {
			trigger = {
				exists = owner
				owner = {
					has_edict = research_subsidies
				}
			}
			energy = 1
		}
	}

	weight = {
        weight = 1
		modifier = {
            factor = @SdjConstWeightModifier0To4
            SdjTriggerJobPriority0_job_calculator = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier0To1
            SdjTriggerJobPriority1_job_calculator = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier1To2
            SdjTriggerJobPriority2_job_calculator = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier2To3
            SdjTriggerJobPriority3_job_calculator = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier3To4
            SdjTriggerJobPriority4_job_calculator = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier4To5
            SdjTriggerJobPriority5_job_calculator = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier5To6
            SdjTriggerJobPriority6_job_calculator = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier6To7
            SdjTriggerJobPriority7_job_calculator = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier7To8
            SdjTriggerJobPriority8_job_calculator = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier8To9
            SdjTriggerJobPriority9_job_calculator = yes
        }
		modifier = {
			factor = 3
			has_trait = trait_erudite
		}
		modifier = {
			factor = 2
			OR = {
				has_trait = trait_robot_logic_engines
				has_trait = trait_intelligent
			}
		}
		modifier = {
			factor = 1.5
			OR = {
				has_trait = trait_natural_engineers
				has_trait = trait_natural_physicists
				has_trait = trait_natural_sociologists
			}
		}
		modifier = {
			factor = 0.9
			exists = owner
			years_passed < 1
			owner = { has_valid_civic = civic_machine_assimilator }
			has_trait = trait_cybernetic
		}
		modifier = {
			factor = 0
			planet = {
				owner = {
					is_ai = yes
					has_resource = { type = minerals amount < 500 }
					has_monthly_income = {
						resource = minerals
						value < 25
					}
				}
			}
		}
	}
}

artisan_drone = {
	category = complex_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_organic_sanctuary

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible = {
		drone_job_check_trigger = yes
        SdjTriggerCheck_job_cat_complex_drone = yes
        NOT = { SdjTriggerJobPriorityN_job_artisan_drone = yes }
	}

	resources = {
		category = planet_artisans
		produces = {
			consumer_goods = 10
		}
		produces = {
			trigger = {
				planet = { has_active_building = building_factory_2 }
			}
			consumer_goods = 1
		}
		produces = {
			trigger = {
				planet = { has_active_building = building_factory_3 }
			}
			consumer_goods = 2
		}

		upkeep = {
			minerals = 10
		}
		upkeep = {
			trigger = {
				planet = { has_active_building = building_factory_2 }
			}
			minerals = 2
		}
		upkeep = {
			trigger = {
				planet = { has_active_building = building_factory_3 }
			}
			minerals = 4
		}
		upkeep = {
			trigger = {
				exists = owner
				owner = {
					has_edict = industrial_subsidies
				}
			}
			energy = 1
		}
	}

	weight = {
        weight = 1
        #modifier = {
        #    factor = @SdjConstWeightModifier0To0
        #    SdjTriggerJobPriority0_job_artisan_drone = yes
        #}
		modifier = {
            factor = @SdjConstWeightModifier0To1
            SdjTriggerJobPriority1_job_artisan_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier1To2
            SdjTriggerJobPriority2_job_artisan_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier2To3
            SdjTriggerJobPriority3_job_artisan_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier3To4
            SdjTriggerJobPriority4_job_artisan_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier4To5
            SdjTriggerJobPriority5_job_artisan_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier5To6
            SdjTriggerJobPriority6_job_artisan_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier6To7
            SdjTriggerJobPriority7_job_artisan_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier7To8
            SdjTriggerJobPriority8_job_artisan_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier8To9
            SdjTriggerJobPriority9_job_artisan_drone = yes
        }
		modifier = {
			factor = 0.9
			exists = owner
			years_passed < 1
			owner = { has_valid_civic = civic_machine_assimilator }
			has_trait = trait_cybernetic
		}
		modifier = {
			factor = 2
			has_job = artisan_drone
			OR = {
				has_trait = trait_robust
				has_trait = trait_robot_efficient_processors
			}
		}
	}
}

fabricator = {
	category = complex_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_foundry_1

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible = {
		drone_job_check_trigger = yes
        SdjTriggerCheck_job_cat_complex_drone = yes
        NOT = { SdjTriggerJobPriorityN_job_fabricator = yes }
	}

	resources = {
		category = planet_metallurgists
		produces = {
			alloys = 4
		}
		produces = {
			trigger = {
				planet = { has_active_building = building_foundry_2 }
			}
			alloys = 1
		}
		produces = {
			trigger = {
				planet = { has_active_building = building_foundry_3 }
			}
			alloys = 2
		}
		upkeep = {
			minerals = 8
		}
		upkeep = {
			trigger = {
				planet = { has_active_building = building_foundry_2 }
			}
			minerals = 2
		}
		upkeep = {
			trigger = {
				planet = { has_active_building = building_foundry_3 }
			}
			minerals = 4
		}
		upkeep = {
			trigger = {
				exists = owner
				owner = {
					has_edict = forge_subsidies
				}
			}
			energy = 1
		}
	}

	weight = {
        weight = 1
		modifier = {
            factor = @SdjConstWeightModifier0To4
            SdjTriggerJobPriority0_job_fabricator = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier0To1
            SdjTriggerJobPriority1_job_fabricator = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier1To2
            SdjTriggerJobPriority2_job_fabricator = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier2To3
            SdjTriggerJobPriority3_job_fabricator = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier3To4
            SdjTriggerJobPriority4_job_fabricator = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier4To5
            SdjTriggerJobPriority5_job_fabricator = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier5To6
            SdjTriggerJobPriority6_job_fabricator = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier6To7
            SdjTriggerJobPriority7_job_fabricator = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier7To8
            SdjTriggerJobPriority8_job_fabricator = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier8To9
            SdjTriggerJobPriority9_job_fabricator = yes
        }
        modifier = {
			factor = 0.9
			exists = owner
			years_passed < 1
			owner = { has_valid_civic = civic_machine_assimilator }
			has_trait = trait_cybernetic
		}
		modifier = {
			factor = 5
			has_job = fabricator
			OR = {
				has_trait = trait_robust
				has_trait = trait_robot_efficient_processors
			}
		}
	}
}

alloy_drone = {
	category = complex_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_foundry_1

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible = {
		drone_job_check_trigger = yes
        SdjTriggerCheck_job_cat_complex_drone = yes
        NOT = { SdjTriggerJobPriorityN_job_alloy_drone = yes }
	}

	resources = {
		category = planet_metallurgists
		produces = {
			alloys = 3
		}
		produces = {
			trigger = {
				planet = { has_active_building = building_foundry_2 }
			}
			alloys = 1
		}
		produces = {
			trigger = {
				planet = { has_active_building = building_foundry_3 }
			}
			alloys = 2
		}

		upkeep = {
			minerals = 6
		}
		upkeep = {
			trigger = {
				planet = { has_active_building = building_foundry_2 }
			}
			minerals = 2
		}
		upkeep = {
			trigger = {
				planet = { has_active_building = building_foundry_3 }
			}
			minerals = 4
		}
		upkeep = {
			trigger = {
				exists = owner
				owner = {
					has_edict = forge_subsidies
				}
			}
			energy = 1
		}
	}

	weight = {
        weight = 1
		modifier = {
            factor = @SdjConstWeightModifier0To4
            SdjTriggerJobPriority0_job_alloy_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier0To1
            SdjTriggerJobPriority1_job_alloy_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier1To2
            SdjTriggerJobPriority2_job_alloy_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier2To3
            SdjTriggerJobPriority3_job_alloy_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier3To4
            SdjTriggerJobPriority4_job_alloy_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier4To5
            SdjTriggerJobPriority5_job_alloy_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier5To6
            SdjTriggerJobPriority6_job_alloy_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier6To7
            SdjTriggerJobPriority7_job_alloy_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier7To8
            SdjTriggerJobPriority8_job_alloy_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier8To9
            SdjTriggerJobPriority9_job_alloy_drone = yes
        }
        modifier = {
			factor = 5
			has_job = alloy_drone
			OR = {
				has_trait = trait_robust
				has_trait = trait_robot_efficient_processors
			}
		}
	}
}

chemist_drone = {
	category = complex_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_chemical_plant

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible = {
		drone_job_check_trigger = yes
        SdjTriggerCheck_job_cat_complex_drone = yes
        NOT = { SdjTriggerJobPriorityN_job_chemist_drone = yes }
	}

	resources = {
		category = planet_chemists
		produces = {
			volatile_motes = 2
		}
		upkeep = {
			minerals = 10
		}
	}

	weight = {
        weight = 1
		modifier = {
            factor = @SdjConstWeightModifier0To4
            SdjTriggerJobPriority0_job_chemist_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier0To1
            SdjTriggerJobPriority1_job_chemist_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier1To2
            SdjTriggerJobPriority2_job_chemist_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier2To3
            SdjTriggerJobPriority3_job_chemist_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier3To4
            SdjTriggerJobPriority4_job_chemist_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier4To5
            SdjTriggerJobPriority5_job_chemist_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier5To6
            SdjTriggerJobPriority6_job_chemist_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier6To7
            SdjTriggerJobPriority7_job_chemist_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier7To8
            SdjTriggerJobPriority8_job_chemist_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier8To9
            SdjTriggerJobPriority9_job_chemist_drone = yes
        }
        modifier = {
			factor = 0.9
			exists = owner
			years_passed < 1
			owner = { has_valid_civic = civic_machine_assimilator }
			has_trait = trait_cybernetic
		}
		modifier = {
			factor = 5
			has_job = chemist_drone
			OR = {
				has_trait = trait_robust
				has_trait = trait_robot_efficient_processors
			}
		}
	}
}

translucer_drone = {
	category = complex_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_crystal_plant

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible = {
		drone_job_check_trigger = yes
        SdjTriggerCheck_job_cat_complex_drone = yes
        NOT = { SdjTriggerJobPriorityN_job_translucer_drone = yes }
	}

	resources = {
		category = planet_translucers
		produces = {
			rare_crystals = 2
		}
		upkeep = {
			minerals = 10
		}
	}

	weight = {
        weight = 1
		modifier = {
            factor = @SdjConstWeightModifier0To4
            SdjTriggerJobPriority0_job_translucer_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier0To1
            SdjTriggerJobPriority1_job_translucer_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier1To2
            SdjTriggerJobPriority2_job_translucer_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier2To3
            SdjTriggerJobPriority3_job_translucer_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier3To4
            SdjTriggerJobPriority4_job_translucer_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier4To5
            SdjTriggerJobPriority5_job_translucer_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier5To6
            SdjTriggerJobPriority6_job_translucer_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier6To7
            SdjTriggerJobPriority7_job_translucer_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier7To8
            SdjTriggerJobPriority8_job_translucer_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier8To9
            SdjTriggerJobPriority9_job_translucer_drone = yes
        }
        modifier = {
			factor = 0.9
			exists = owner
			years_passed < 1
			owner = { has_valid_civic = civic_machine_assimilator }
			has_trait = trait_cybernetic
		}
		modifier = {
			factor = 5
			has_job = translucer_drone
			OR = {
				has_trait = trait_robust
				has_trait = trait_robot_efficient_processors
			}
		}
	}
}

gas_refiner_drone = {
	category = complex_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_refinery

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible = {
		drone_job_check_trigger = yes
        SdjTriggerCheck_job_cat_complex_drone = yes
        NOT = { SdjTriggerJobPriorityN_job_gas_refiner_drone = yes }
	}

	resources = {
		category = planet_refiners
		produces = {
			exotic_gases = 2
		}
		upkeep = {
			minerals = 10
		}
	}

	weight = {
        weight = 1
		modifier = {
            factor = @SdjConstWeightModifier0To4
            SdjTriggerJobPriority0_job_gas_refiner_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier0To1
            SdjTriggerJobPriority1_job_gas_refiner_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier1To2
            SdjTriggerJobPriority2_job_gas_refiner_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier2To3
            SdjTriggerJobPriority3_job_gas_refiner_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier3To4
            SdjTriggerJobPriority4_job_gas_refiner_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier4To5
            SdjTriggerJobPriority5_job_gas_refiner_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier5To6
            SdjTriggerJobPriority6_job_gas_refiner_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier6To7
            SdjTriggerJobPriority7_job_gas_refiner_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier7To8
            SdjTriggerJobPriority8_job_gas_refiner_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier8To9
            SdjTriggerJobPriority9_job_gas_refiner_drone = yes
        }
        modifier = {
            factor = 0.9
            exists = owner
            years_passed < 1
            owner = { has_valid_civic = civic_machine_assimilator }
            has_trait = trait_cybernetic
        }
        modifier = {
			factor = 0.9
			exists = owner
			years_passed < 1
			owner = { has_valid_civic = civic_machine_assimilator }
			has_trait = trait_cybernetic
		}
		modifier = {
			factor = 5
			has_job = gas_refiner_drone
			OR = {
				has_trait = trait_robust
				has_trait = trait_robot_efficient_processors
			}
		}
	}
}

patrol_drone = {
	category = complex_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_stronghold

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible = {
		drone_job_check_trigger = yes
        SdjTriggerCheck_job_cat_complex_drone = yes
        NOT = { SdjTriggerJobPriorityN_job_patrol_drone = yes }
	}

	resources = {
		category = planet_jobs
		produces = {
			unity = 1
		}
	}

	planet_modifier = {
		planet_crime_no_happiness_add = -20
	}

	pop_modifier = {
		pop_defense_armies_add = 2
	}

	weight = {
        weight = 1
        modifier = {
            factor = @SdjConstWeightModifier0To4
            SdjTriggerJobPriority0_job_patrol_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier0To1
            SdjTriggerJobPriority1_job_patrol_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier1To2
            SdjTriggerJobPriority2_job_patrol_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier2To3
            SdjTriggerJobPriority3_job_patrol_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier3To4
            SdjTriggerJobPriority4_job_patrol_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier4To5
            SdjTriggerJobPriority5_job_patrol_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier5To6
            SdjTriggerJobPriority6_job_patrol_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier6To7
            SdjTriggerJobPriority7_job_patrol_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier7To8
            SdjTriggerJobPriority8_job_patrol_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier8To9
            SdjTriggerJobPriority9_job_patrol_drone = yes
        }
		modifier = {
			factor = 50
			planet = { planet_crime > 22 }
		}
		modifier = {
			weight = 20
			exists = owner
			owner = { is_at_war = yes }
		}
		modifier = {
			factor = 3
			has_trait = trait_resilient
		}
		modifier = {
			factor = 3
			planet = { planet_crime > 0 }
			has_trait = trait_very_strong
		}
		modifier = {
			factor = 2
			planet = { planet_crime > 0 }
			has_trait = trait_strong
		}
		modifier = {
			factor = 0.5
			has_trait = trait_weak
		}
		modifier = {
			factor = 1.1
			OR = {
				has_trait = trait_traditional
				has_trait = trait_robot_propaganda_machines
			}
		}
		modifier = {
			factor = 2
			has_trait = trait_lithoid
		}
		modifier = {
			factor = 1.2
			has_trait = trait_cybernetic
		}
	}
}

crystal_mining_drone = {
	category = complex_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_crystal_mines

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible = {
		drone_job_check_trigger = yes
        SdjTriggerCheck_job_cat_complex_drone = yes
        NOT = { SdjTriggerJobPriorityN_job_crystal_mining_drone = yes }
	}

	resources = {
		category = planet_miners
		produces = {
			rare_crystals = 2
		}
		upkeep = {
			energy = 1
		}
	}

	weight = {
        weight = 1
        modifier = {
            factor = @SdjConstWeightModifier0To4
            SdjTriggerJobPriority0_job_crystal_mining_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier0To1
            SdjTriggerJobPriority1_job_crystal_mining_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier1To2
            SdjTriggerJobPriority2_job_crystal_mining_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier2To3
            SdjTriggerJobPriority3_job_crystal_mining_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier3To4
            SdjTriggerJobPriority4_job_crystal_mining_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier4To5
            SdjTriggerJobPriority5_job_crystal_mining_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier5To6
            SdjTriggerJobPriority6_job_crystal_mining_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier6To7
            SdjTriggerJobPriority7_job_crystal_mining_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier7To8
            SdjTriggerJobPriority8_job_crystal_mining_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier8To9
            SdjTriggerJobPriority9_job_crystal_mining_drone = yes
        }
		modifier = {
			factor = 1.1
			exists = owner
			years_passed < 1
			owner = { has_valid_civic = civic_machine_assimilator }
			has_trait = trait_cybernetic
		}
		modifier = {
			factor = 5
			has_job = crystal_mining_drone
			OR = {
				has_trait = trait_robust
				has_trait = trait_robot_efficient_processors
			}
		}
	}
}

mote_harvesting_drone = {
	category = complex_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_mote_harvesting_traps

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible = {
		drone_job_check_trigger = yes
        SdjTriggerCheck_job_cat_complex_drone = yes
        NOT = { SdjTriggerJobPriorityN_job_mote_harvesting_drone = yes }
	}

	resources = {
		category = planet_miners
		produces = {
			volatile_motes = 2
		}
		upkeep = {
			energy = 1
		}
	}

	weight = {
        weight = 1
        modifier = {
            factor = @SdjConstWeightModifier0To4
            SdjTriggerJobPriority0_job_mote_harvesting_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier0To1
            SdjTriggerJobPriority1_job_mote_harvesting_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier1To2
            SdjTriggerJobPriority2_job_mote_harvesting_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier2To3
            SdjTriggerJobPriority3_job_mote_harvesting_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier3To4
            SdjTriggerJobPriority4_job_mote_harvesting_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier4To5
            SdjTriggerJobPriority5_job_mote_harvesting_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier5To6
            SdjTriggerJobPriority6_job_mote_harvesting_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier6To7
            SdjTriggerJobPriority7_job_mote_harvesting_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier7To8
            SdjTriggerJobPriority8_job_mote_harvesting_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier8To9
            SdjTriggerJobPriority9_job_mote_harvesting_drone = yes
        }
		modifier = {
			factor = 1.1
			exists = owner
			years_passed < 1
			owner = { has_valid_civic = civic_machine_assimilator }
			has_trait = trait_cybernetic
		}
		modifier = {
			factor = 5
			has_job = mote_harvesting_drone
			OR = {
				has_trait = trait_robust
				has_trait = trait_robot_efficient_processors
			}
		}
	}
}

gas_extraction_drone = {
	category = complex_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_gas_extractors

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible = {
		drone_job_check_trigger = yes
        SdjTriggerCheck_job_cat_complex_drone = yes
        NOT = { SdjTriggerJobPriorityN_job_gas_extraction_drone = yes }
	}

	resources = {
		category = planet_miners
		produces = {
			exotic_gases = 2
		}
		upkeep = {
			energy = 1
		}
	}

	weight = {
        weight = 1
        modifier = {
            factor = @SdjConstWeightModifier0To4
            SdjTriggerJobPriority0_job_gas_extraction_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier0To1
            SdjTriggerJobPriority1_job_gas_extraction_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier1To2
            SdjTriggerJobPriority2_job_gas_extraction_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier2To3
            SdjTriggerJobPriority3_job_gas_extraction_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier3To4
            SdjTriggerJobPriority4_job_gas_extraction_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier4To5
            SdjTriggerJobPriority5_job_gas_extraction_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier5To6
            SdjTriggerJobPriority6_job_gas_extraction_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier6To7
            SdjTriggerJobPriority7_job_gas_extraction_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier7To8
            SdjTriggerJobPriority8_job_gas_extraction_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier8To9
            SdjTriggerJobPriority9_job_gas_extraction_drone = yes
        }
		modifier = {
			factor = 1.1
			exists = owner
			years_passed < 1
			owner = { has_valid_civic = civic_machine_assimilator }
			has_trait = trait_cybernetic
		}
		modifier = {
			factor = 5
			has_job = gas_extraction_drone
			OR = {
				has_trait = trait_robust
				has_trait = trait_robot_efficient_processors
			}
		}
	}
}

mining_drone = {
	category = simple_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_mineral_purification_plant

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible = {
		drone_job_check_trigger = yes
        SdjTriggerCheck_job_cat_simple_drone = yes
        NOT = { SdjTriggerJobPriorityN_job_mining_drone = yes }
	}

	resources = {
		category = planet_miners
		produces = {
			minerals = 4
		}
		produces = {
			trigger = {
				planet = { has_active_building = building_mineral_purification_plant }
			}
			minerals = 1
		}
		produces = {
			trigger = {
				planet = { has_active_building = building_mineral_purification_hub }
			}
			minerals = 2
		}
		upkeep = {
			trigger = {
				exists = owner
				owner = {
					has_edict = mining_subsidies
				}
			}
			energy = 0.5
		}
	}

	weight = {
        weight = 1
        #modifier = {
        #    factor = @SdjConstWeightModifier0To2
        #    SdjTriggerJobPriority0_job_mining_drone = yes
        #}
        modifier = {
            factor = @SdjConstWeightModifier0To1
            SdjTriggerJobPriority1_job_mining_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier1To2
            SdjTriggerJobPriority2_job_mining_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier2To3
            SdjTriggerJobPriority3_job_mining_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier3To4
            SdjTriggerJobPriority4_job_mining_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier4To5
            SdjTriggerJobPriority5_job_mining_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier5To6
            SdjTriggerJobPriority6_job_mining_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier6To7
            SdjTriggerJobPriority7_job_mining_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier7To8
            SdjTriggerJobPriority8_job_mining_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier8To9
            SdjTriggerJobPriority9_job_mining_drone = yes
        }
		modifier = {
			factor = 2
			OR = {
				has_trait = trait_industrious
				has_trait = trait_robot_power_drills
			}
		}
		modifier = {
			factor = 1.1
			exists = owner
			years_passed < 1
			owner = { has_valid_civic = civic_machine_assimilator }
			has_trait = trait_cybernetic
		}
		modifier = {
			factor = 1.2
			has_job = mining_drone
		}
		modifier = {
			factor = 0.9
			NOT = { has_job = mining_drone }
			owner = {
				has_monthly_income = {
					resource = minerals
					value > 85
				}
			}
		}
		modifier = {
			factor = 0.65
			has_trait = trait_necrophage
		}
	}
}

agri_drone = {
	category = simple_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_food_processing_facility

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible = {
		drone_job_check_trigger = yes
        SdjTriggerCheck_job_cat_simple_drone = yes
        NOT = { SdjTriggerJobPriorityN_job_agri_drone = yes }
	}

	resources = {
		category = planet_farmers
		produces = {
			food = 6
		}
		produces = {
			trigger = {
				exists = owner
				owner = {
					is_robot_empire = yes
				}
			}
			food = -1
		}
		produces = {
			trigger = {
				planet = { has_active_building = building_food_processing_facility }
			}
			food = 1
		}
		produces = {
			trigger = {
				planet = { has_active_building = building_food_processing_center }
			}
			food = 2
		}
		upkeep = {
			trigger = {
				exists = owner
				owner = {
					has_edict = farming_subsidies
				}
			}
			energy = 0.5
		}
	}

	weight = {
        weight = 1
        #modifier = {
        #    factor = @SdjConstWeightModifier0To2
        #    SdjTriggerJobPriority0_job_agri_drone = yes
        #}
        modifier = {
            factor = @SdjConstWeightModifier0To1
            SdjTriggerJobPriority1_job_agri_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier1To2
            SdjTriggerJobPriority2_job_agri_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier2To3
            SdjTriggerJobPriority3_job_agri_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier3To4
            SdjTriggerJobPriority4_job_agri_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier4To5
            SdjTriggerJobPriority5_job_agri_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier5To6
            SdjTriggerJobPriority6_job_agri_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier6To7
            SdjTriggerJobPriority7_job_agri_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier7To8
            SdjTriggerJobPriority8_job_agri_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier8To9
            SdjTriggerJobPriority9_job_agri_drone = yes
        }
		modifier = {
			factor = 2
			OR = {
				has_trait = trait_agrarian
				has_trait = trait_robot_harvesters
			}
		}
		modifier = {
			factor = 0.9
			NOT = { has_job = mining_drone }
			owner = {
				has_monthly_income = {
					resource = food
					value > 50
				}
			}
		}
		modifier = {
			factor = 1.2
			has_job = agri_drone
		}
		modifier = {
			factor = 0.9
			owner = {
				is_robot_empire = yes
			}
		}
		modifier = {
			factor = 1.1
			exists = owner
			years_passed < 1
			owner = { has_valid_civic = civic_machine_assimilator }
			has_trait = trait_cybernetic
		}

		modifier = {
			factor = 0.5
			has_trait = trait_lithoid

			owner = {
				is_lithoid_empire = yes
				has_monthly_income = {
					resource = food
					value >= 0
				}
			}
		}
		modifier = {
			factor = 0.65
			has_trait = trait_necrophage
		}
	}
}

technician_drone = {
	category = simple_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_energy_grid

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible = {
		drone_job_check_trigger = yes
        SdjTriggerCheck_job_cat_simple_drone = yes
        NOT = { SdjTriggerJobPriorityN_job_technician_drone = yes }
	}

	resources = {
		category = planet_technician
		produces = {
			energy = 6
		}
		produces = {
			trigger = {
				exists = owner
				owner = {
					is_robot_empire = yes
				}
			}
			energy = 2
		}
		produces = {
			trigger = {
				planet = { has_active_building = building_energy_grid }
			}
			energy = 1
		}
		produces = {
			trigger = {
				planet = { has_active_building = building_energy_nexus }
			}
			energy = 2
		}
		upkeep = {
			trigger = {
				exists = owner
				owner = {
					has_edict = capacity_subsidies
				}
			}
			energy = 0.5
		}
	}

	weight = {
        weight = 1
        #modifier = {
        #    factor = @SdjConstWeightModifier0To2
        #    SdjTriggerJobPriority0_job_technician_drone = yes
        #}
        modifier = {
            factor = @SdjConstWeightModifier0To1
            SdjTriggerJobPriority1_job_technician_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier1To2
            SdjTriggerJobPriority2_job_technician_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier2To3
            SdjTriggerJobPriority3_job_technician_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier3To4
            SdjTriggerJobPriority4_job_technician_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier4To5
            SdjTriggerJobPriority5_job_technician_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier5To6
            SdjTriggerJobPriority6_job_technician_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier6To7
            SdjTriggerJobPriority7_job_technician_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier7To8
            SdjTriggerJobPriority8_job_technician_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier8To9
            SdjTriggerJobPriority9_job_technician_drone = yes
        }
		modifier = {
			factor = 2
			OR = {
				has_trait = trait_robot_superconductive
				has_trait = trait_ingenious
			}
		}
		modifier = {
			factor = 0.9
			NOT = { has_job = mining_drone }
			owner = {
				has_monthly_income = {
					resource = energy
					value > 50
				}
			}
		}
		modifier = {
			factor = 1.2
			has_job = technician_drone
		}
		modifier = {
			factor = 1.1
			exists = owner
			years_passed < 1
			owner = { has_valid_civic = civic_machine_assimilator }
			has_trait = trait_cybernetic
		}
		modifier = {
			factor = 0.65
			has_trait = trait_necrophage
		}
	}
}

maintenance_drone = {
	category = simple_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_maintenance_depot

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	resources = {
		category = planet_jobs
		produces = {
			trigger = {
				exists = owner
				owner = {
					has_valid_civic = civic_machine_maintenance_protocols
				}
			}
			unity = 1
		}
	}

	possible = {
		drone_job_check_trigger = yes
        SdjTriggerCheck_job_cat_simple_drone = yes			 
        NOT = { SdjTriggerJobPriorityN_job_maintenance_drone = yes }
	}

	planet_modifier = {
		planet_amenities_no_happiness_add = 4
	}
	triggered_planet_modifier = {
		potential = {
			OR = {
				has_trait = trait_robot_emotion_emulators
				has_trait = trait_charismatic
			}
		}
		modifier = {
			planet_amenities_no_happiness_add = 1
		}
	}
	triggered_planet_modifier = {
		potential = {
			OR = {
				has_trait = trait_robot_uncanny
				has_trait = trait_repugnant
			}
		}
		modifier = {
			planet_amenities_no_happiness_add = -1
		}
	}

	weight = {
        weight = 1
        #modifier = {
        #    factor = @SdjConstWeightModifier0To0
        #    SdjTriggerJobPriority0_job_maintenance_drone = yes
        #}
        modifier = {
            factor = @SdjConstWeightModifier0To1
            SdjTriggerJobPriority1_job_maintenance_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier1To2
            SdjTriggerJobPriority2_job_maintenance_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier2To3
            SdjTriggerJobPriority3_job_maintenance_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier3To4
            SdjTriggerJobPriority4_job_maintenance_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier4To5
            SdjTriggerJobPriority5_job_maintenance_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier5To6
            SdjTriggerJobPriority6_job_maintenance_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier6To7
            SdjTriggerJobPriority7_job_maintenance_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier7To8
            SdjTriggerJobPriority8_job_maintenance_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier8To9
            SdjTriggerJobPriority9_job_maintenance_drone = yes
        }
		modifier = {
			factor = 2
			OR = {
				has_trait = trait_robot_emotion_emulators
				has_trait = trait_charismatic
			}
		}
		modifier = {
			factor = 0.5
			OR = {
				has_trait = trait_robot_uncanny
				has_trait = trait_repugnant
			}
		}
		modifier = {
			factor = 1.1
			exists = owner
			years_passed < 1
			owner = { has_valid_civic = civic_machine_assimilator }
			has_trait = trait_cybernetic
		}
		modifier = {
			factor = 0.1
			NOT = { has_job = maintenance_drone }
			planet = {
				free_amenities > 5
			}
		}
		modifier = {
			factor = 1.1
			OR = {
				has_trait = trait_traditional
				has_trait = trait_robot_propaganda_machines
			}
			exists = owner
			owner = {
				has_valid_civic = civic_machine_maintenance_protocols
			}
		}
		modifier = {
			factor = 2
			planet = {
				free_amenities <= -1
			}
		}
		modifier = {
			factor = 1.5
			planet = {
				free_amenities <= -5
			}
		}
		modifier = {
			factor = 1.5
			planet = {
				free_amenities <= -10
			}
		}
		modifier = {
			factor = 0.85
			has_trait = trait_necrophage
		}
	}
}

warrior_drone = {
	category = simple_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_stronghold

	country_modifier = {
		country_naval_cap_add = 4
	}

	triggered_country_modifier = {
		potential = {
			planet = {
				exists = owner
				owner = { has_technology = "tech_ground_defense_planning" }
			}
		}
		modifier = {
			country_naval_cap_add = 2
		}
	}

	pop_modifier = {
		pop_defense_armies_add = 3
	}

	triggered_planet_modifier = {
		potential = {
			planet = {
				OR = {
					has_modifier = compliance_protocols
					has_modifier = hunter_killer_drones
				}
			}
		}
		modifier = {
			planet_stability_add = 5
		}
	}

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible = {
		drone_job_check_trigger = yes
        SdjTriggerCheck_job_cat_simple_drone = yes
        NOT = { SdjTriggerJobPriorityN_job_warrior_drone = yes }
	}

	weight = {
        weight = 1
        #modifier = {
        #    factor = @SdjConstWeightModifier0To0
        #    SdjTriggerJobPriority0_job_warrior_drone = yes
        #}
        modifier = {
            factor = @SdjConstWeightModifier0To1
            SdjTriggerJobPriority1_job_warrior_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier1To2
            SdjTriggerJobPriority2_job_warrior_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier2To3
            SdjTriggerJobPriority3_job_warrior_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier3To4
            SdjTriggerJobPriority4_job_warrior_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier4To5
            SdjTriggerJobPriority5_job_warrior_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier5To6
            SdjTriggerJobPriority6_job_warrior_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier6To7
            SdjTriggerJobPriority7_job_warrior_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier7To8
            SdjTriggerJobPriority8_job_warrior_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier8To9
            SdjTriggerJobPriority9_job_warrior_drone = yes
        }
		weight = 5
		modifier = {
			weight = 100
			exists = owner
			owner = { is_at_war = yes }
		}
		modifier = {
			factor = 10
			planet = {
				OR = {
					has_modifier = compliance_protocols
					has_modifier = hunter_killer_drones
				}
			}
		}
		modifier = {
			factor = 4
			has_trait = trait_resilient
		}
		modifier = {
			factor = 4
			has_trait = trait_very_strong
		}
		modifier = {
			factor = 3
			has_trait = trait_strong
		}
		modifier = {
			factor = 0.5
			has_trait = trait_weak
		}
		modifier = {
			factor = 0.9
			exists = owner
			years_passed < 1
			owner = { has_valid_civic = civic_machine_assimilator }
			has_trait = trait_cybernetic
		}
		modifier = {
			factor = 0
			planet = { count_owned_pop = { limit = { } count < 12 } }
			owner = { is_ai = yes }
		}
		modifier = {
			factor = 2
			has_trait = trait_lithoid
		}
		modifier = {
			factor = 1.2
			has_trait = trait_cybernetic
		}
	}
}

bluelotus_drone = {
    category = complex_drone
	is_capped_by_modifier = yes
	condition_string = WORKER_JOB_TRIGGER
	building_icon = building_illicit_research_labs
	icon = foundry

	possible_pre_triggers = {
		has_owner = yes
		is_being_purged = no
		is_being_assimilated = no
		is_sapient = yes
	}

	possible = {
		worker_job_check_trigger = yes
	}

	resources = {
		category = planet_metallurgists
		produces = {
			alloys = 4
		}
		produces = {
			trigger = {
				planet = { has_active_building = building_foundry_2 }
			}
			alloys = 1
		}
		produces = {
			trigger = {
				planet = { has_active_building = building_foundry_3 }
			}
			alloys = 2
		}

		upkeep = {
			trigger = {
				is_organic_species = yes
				is_lithoid = no
			}
			food = @living_standard_food_normal
		}
		upkeep = {
			trigger = {
				is_lithoid = yes
			}
			minerals = @living_standard_food_normal
		}
		upkeep = {
			trigger = {
				is_robotic_species = yes
			}
			energy = @living_standard_energy_normal
		}
	}

	weight = {
		weight = @complex_drone_job_weight
		modifier = {
			factor = 5
			has_job = bluelotus_drone
			OR = {
				has_trait = trait_robust
				has_trait = trait_robot_efficient_processors
			}
		}
	}
}

chronicle_drone = {
	category = complex_drone
	condition_string = DRONE_JOB_TRIGGER
	building_icon = building_galactic_memorial_1

	possible_pre_triggers = {
		has_owner = yes
		is_enslaved = no
		is_being_purged = no
		is_being_assimilated = no
	}

	possible = { 
		drone_job_check_trigger = yes
		SdjTriggerCheck_job_cat_complex_drone = yes
		NOT = { SdjTriggerJobPriorityN_job_chronicle_drone = yes }
	}

	resources = {
		category = planet_researchers
		produces = {
			unity = 4
			society_research = 2
		}
		upkeep = {
			trigger = { is_robotic_species = yes }
			minerals = 1
			energy = 2
		}
		upkeep = {
			trigger = { species = { is_archetype = BIOLOGICAL } }
			energy = 1
			food = 2
		}
		upkeep = {
			trigger = { species = { is_archetype = LITHOID } }
			energy = 1
			minerals = 2
		}
	}

	weight = {
		weight = 1
        modifier = {
            factor = @SdjConstWeightModifier0To4
            SdjTriggerJobPriority0_job_gas_extraction_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier0To1
            SdjTriggerJobPriority1_job_gas_extraction_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier1To2
            SdjTriggerJobPriority2_job_gas_extraction_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier2To3
            SdjTriggerJobPriority3_job_gas_extraction_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier3To4
            SdjTriggerJobPriority4_job_gas_extraction_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier4To5
            SdjTriggerJobPriority5_job_gas_extraction_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier5To6
            SdjTriggerJobPriority6_job_gas_extraction_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier6To7
            SdjTriggerJobPriority7_job_gas_extraction_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier7To8
            SdjTriggerJobPriority8_job_gas_extraction_drone = yes
        }
        modifier = {
            factor = @SdjConstWeightModifier8To9
            SdjTriggerJobPriority9_job_gas_extraction_drone = yes
        }
		modifier = {
			factor = 1.25
			has_trait = trait_charismatic
		}
		modifier = {
			factor = 0.8
			has_trait = trait_repugnant
		}
		modifier = {
			factor = 0.01 # crisis purge
			exists = planet
			exists = planet.controller
			planet.controller = {
				OR = {
					is_country_type = swarm
					is_country_type = ai_empire
				}
			}
		}
	}
}